
สำหรับส่วนนี้จะเกี่ยวกับ declared plan ซึ่งเป็น api จริงที่ต้องใช้ token , ต้องตรวจสถานะ , ต้องทำงานตาม business ของระบบ 
ในฟังก์ชัน getDeclaredPlan หนูเขียนให้จัดการเรื่อง authentication ด้วย token จาก keycloak ก่อนจะ fetch แล้วก็ได้เข้าใจว่า api จริงในระบบที่มี security ไม่เหมือนกับ fetch แบบลองเล่นๆตอนแรก 
เพราะต้องเพิ่มขั้นตอนพวก token และรับมือกับปัญหา เช่น ถ้า api คืน 404 มันคือการที่นศ.คนนี้ยังไม่เคย declare plan 
ดังนั้นต้อง return null ไม่ใช่โยน error ทำให้หนูได้เรียนรู้การเขียน business logic เฉพาะของระบบลงไปด้วย
ในส่วนของการเขียน createDeclarePlan จะเป็นการเขียน POST แทน ซึ่งเป็นการส่งข้อมูลไปที่ backend ด้วย โครงสร้างจะคล้าย getDeclaredPlan เพราะต้อง refresh token และส่ง authorization header เหมือนเดิม 
แต่จะมีสิ่งที่เพิ่มเข้ามาคือ method : “POST” และการแปลงข้อมูล planId ให้เป็น JSON ผ่าน JSON.stringify({ planId }) ทำให้หนูได้เรียนรู้รูปแบบการส่งข้อมูลกลับไปยัง server ว่าต้องแปลง object เป็น JSON ก่อนเสมอ 
และต้องประกาศ Content-Type ให้ชัดเจนเพื่อให้ backend เข้าใจว่าข้อมูลที่ส่งไปอยู่ในรูปแบบ JSON

รวมทั้งสอง function นี้ ทำให้หนูเข้าใจการ fetch api มากขึ้นในการใช้งานจริง